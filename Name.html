<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng C·ª• G·ª£i √ù T√™n B√© Trai - H·ªç Nguy·ªÖn 2025 (·∫§t T·ªµ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthy Harmony -->
    <!-- Application Structure Plan: T√¥i ƒë√£ thi·∫øt k·∫ø m·ªôt ·ª©ng d·ª•ng m·ªôt trang (SPA) v·ªõi c·∫•u tr√∫c theo t·ª´ng ph·∫ßn chuy√™n bi·ªát, c√≥ thanh ƒëi·ªÅu h∆∞·ªõng c·ªë ƒë·ªãnh ƒë·ªÉ ng∆∞·ªùi d√πng d·ªÖ d√†ng di chuy·ªÉn. C·∫•u tr√∫c n√†y kh√¥ng sao ch√©p b√°o c√°o g·ªëc m√† t·ªï ch·ª©c l·∫°i th√¥ng tin theo m·ªôt lu·ªìng logic, l·∫•y ng∆∞·ªùi d√πng l√†m trung t√¢m: (1) Gi·ªõi thi·ªáu t·ªïng quan v√† t√™n ƒë·ªÅ xu·∫•t ch√≠nh. (2) Ph√¢n t√≠ch s√¢u t√™n ƒë·ªÅ xu·∫•t qua c√°c th·∫ª t∆∞∆°ng t√°c. (3) Tr·ª±c quan h√≥a c√°c quy t·∫Øc Phong th·ªßy ph·ª©c t·∫°p (Ng≈© H√†nh, Tam H·ª£p) b·∫±ng bi·ªÉu ƒë·ªì v√† icon. (4) M·ªôt th∆∞ vi·ªán t√™n c√≥ th·ªÉ l·ªçc ƒë·ªÉ kh√°m ph√° c√°c l·ª±a ch·ªçn thay th·∫ø. (5) T√≥m t·∫Øt c√°c nguy√™n t·∫Øc ƒë·∫∑t t√™n. C·∫•u tr√∫c n√†y gi√∫p ng∆∞·ªùi d√πng ti√™u h√≥a th√¥ng tin t·ª´ t·ªïng quan ƒë·∫øn chi ti·∫øt, t·ª´ ƒë·ªÅ xu·∫•t ch√≠nh ƒë·∫øn c√°c l·ª±a ch·ªçn kh√°c m·ªôt c√°ch tr·ª±c quan v√† h·∫•p d·∫´n. -->
    <!-- Visualization & Content Choices: B√°o c√°o -> M·ª•c ti√™u -> Ph∆∞∆°ng ph√°p -> T∆∞∆°ng t√°c -> L√Ω do. | Th√¥ng tin b√© -> Th√¥ng b√°o -> B·∫£ng ƒëi·ªÅu khi·ªÉn -> Tƒ©nh -> Cung c·∫•p b·ªëi c·∫£nh ngay l·∫≠p t·ª©c. | T√™n "Nguy·ªÖn Trung Kh·∫£i" -> Gi·∫£i th√≠ch -> Th·∫ª l·∫≠t t∆∞∆°ng t√°c -> Click -> Cho ph√©p kh√°m ph√° s√¢u t·ª´ng th√†nh ph·∫ßn t√™n m√† kh√¥ng b·ªã cho√°ng ng·ª£p. | Quy t·∫Øc Ng≈© H√†nh -> So s√°nh/Hi·ªÉu -> Bi·ªÉu ƒë·ªì Polar Area c·ªßa Chart.js -> Hover -> Bi·∫øn d·ªØ li·ªáu ph·ª©c t·∫°p th√†nh h√¨nh ·∫£nh tr·ª±c quan, d·ªÖ so s√°nh. | Quy t·∫Øc Tam H·ª£p/T·ª© Xung -> So s√°nh -> Nh√≥m icon HTML/CSS -> Tƒ©nh -> C√°ch tr√¨nh b√†y ƒë∆°n gi·∫£n, r√µ r√†ng cho c√°c m·ªëi quan h·ªá. | Danh s√°ch t√™n g·ª£i √Ω -> Kh√°m ph√° -> Danh s√°ch c√≥ th·ªÉ l·ªçc -> Click n√∫t -> TƒÉng t√≠nh t∆∞∆°ng t√°c, cho ph√©p ng∆∞·ªùi d√πng t√¨m t√™n theo √Ω mu·ªën. | Nguy√™n t·∫Øc chung -> T·ªï ch·ª©c -> Ph·∫ßn t·ª≠ accordion/toggle -> Click -> Ti·∫øt ki·ªám kh√¥ng gian, tr√¨nh b√†y th√¥ng tin d√†y ƒë·∫∑c m·ªôt c√°ch g·ªçn g√†ng. | Th∆∞ vi·ªán s·ª≠ d·ª•ng: Chart.js cho bi·ªÉu ƒë·ªì Canvas, TailwindCSS v√† Vanilla JS cho to√†n b·ªô c·∫•u tr√∫c v√† t∆∞∆°ng t√°c. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
        }
        .section-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #4A5568; /* gray-700 */
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: #F59E0B; /* amber-500 */
            margin: 0.5rem auto 0;
            border-radius: 2px;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .nav-link {
             transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover {
            color: #F59E0B; /* amber-500 */
        }
        .active-nav {
            color: #F59E0B; /* amber-500 */
            border-bottom: 2px solid #F59E0B;
        }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 450px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 350px;
            max-height: 400px; 
        }
        @media (min-width: 768px) { 
            .chart-container { 
                height: 400px; 
            } 
        }
        .filter-btn {
            transition: all 0.3s ease;
        }
        .filter-btn.active {
            background-color: #D97706; /* amber-600 */
            color: white;
            transform: scale(1.05);
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #F59E0B;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-700">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-gray-800">
                <a href="#home">ƒê·∫∑t T√™n Cho B√©</a>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#recommendation" class="nav-link text-gray-600 font-semibold pb-1">T√™n ƒê·ªÅ Xu·∫•t</a>
                <a href="#fengshui" class="nav-link text-gray-600 font-semibold pb-1">Lu·∫≠n Gi·∫£i Phong Th·ªßy</a>
                <a href="#library" class="nav-link text-gray-600 font-semibold pb-1">Th∆∞ Vi·ªán T√™n</a>
                <a href="#principles" class="nav-link text-gray-600 font-semibold pb-1">Nguy√™n T·∫Øc</a>
                <a href="#instructions" class="nav-link text-gray-600 font-semibold pb-1">H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
             <a href="#recommendation" class="block py-2 text-gray-600 font-semibold">T√™n ƒê·ªÅ Xu·∫•t</a>
             <a href="#fengshui" class="block py-2 text-gray-600 font-semibold">Lu·∫≠n Gi·∫£i Phong Th·ªßy</a>
             <a href="#library" class="block py-2 text-gray-600 font-semibold">Th∆∞ Vi·ªán T√™n</a>
             <a href="#principles" class="block py-2 text-gray-600 font-semibold">Nguy√™n T·∫Øc</a>
             <a href="#instructions" class="block py-2 text-gray-600 font-semibold">H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</a>
        </div>
    </header>

    <main>
        <section id="home" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">C√¥ng C·ª• G·ª£i √ù T√™n Cho B√© Trai</h1>
                <p class="text-lg text-gray-600 mb-8">D·ª±a tr√™n ph√¢n t√≠ch vƒÉn h√≥a, phong th·ªßy cho b√© trai h·ªç Nguy·ªÖn, d·ª± sinh 11/01/2026.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto text-left">
                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-2 text-amber-600">üë§ Th√¥ng Tin B√©</h3>
                        <p><strong>H·ªç:</strong> Nguy·ªÖn</p>
                        <p><strong>D·ª± sinh:</strong> 11/01/2026</p>
                        <p><strong>Cha:</strong> Nguy·ªÖn Trung Nghƒ©a</p>
                         <p><strong>M·∫π:</strong> Nguy·ªÖn Th·ªã Thu Trang</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-2 text-amber-600">üóìÔ∏è √Çm L·ªãch & Con Gi√°p</h3>
                        <p><strong>NƒÉm √¢m l·ªãch:</strong> ·∫§t T·ªµ (2025)</p>
                        <p><strong>Con gi√°p:</strong> R·∫Øn (T·ªµ)</p>
                        <p><strong>Thi√™n Can:</strong> ·∫§t</p>
                        <p><strong>ƒê·ªãa Chi:</strong> T·ªµ</p>
                    </div>
                    <div class="card p-6">
                         <h3 class="font-bold text-xl mb-2 text-amber-600">üî• Ng≈© H√†nh</h3>
                        <p><strong>B·∫£n m·ªánh:</strong> H·ªèa</p>
                        <p><strong>N·∫°p √¢m:</strong> Ph√∫ ƒêƒÉng H·ªèa</p>
                        <p class="italic text-sm">(L·ª≠a ƒë√®n d·∫ßu)</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="recommendation" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="section-title">T√™n Hay ƒê·ªÅ Xu·∫•t</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Sau khi t·ªïng h·ª£p c√°c y·∫øu t·ªë v·ªÅ vƒÉn h√≥a, √Ω nghƒ©a, v√† s·ª± h√†i h√≤a phong th·ªßy, ƒë√¢y l√† c√°i t√™n ƒë∆∞·ª£c ƒë√°nh gi√° l√† t·ªët nh·∫•t, h·ªôi t·ª• nhi·ªÅu gi√° tr·ªã t·ªët ƒë·∫πp, g·ª≠i g·∫Øm hy v·ªçng v·ªÅ m·ªôt t∆∞∆°ng lai t∆∞∆°i s√°ng, th√†nh c√¥ng v√† tr·ªçn v·∫πn cho b√©.</p>
                
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-3xl mx-auto">
                    <h3 class="text-center text-5xl font-bold text-amber-600 tracking-wider mb-8">Nguy·ªÖn Trung Kh·∫£i</h3>
                    <div class="grid md:grid-cols-3 gap-6 text-center">
                        <div id="card-ho" class="p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-amber-50">
                            <p class="text-sm text-gray-500">H·ªç</p>
                            <p class="text-3xl font-semibold text-gray-800">Nguy·ªÖn</p>
                        </div>
                        <div id="card-dem" class="p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-amber-50">
                            <p class="text-sm text-gray-500">T√™n ƒë·ªám</p>
                            <p class="text-3xl font-semibold text-gray-800">Trung</p>
                        </div>
                        <div id="card-ten" class="p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-amber-50">
                            <p class="text-sm text-gray-500">T√™n ch√≠nh</p>
                            <p class="text-3xl font-semibold text-gray-800">Kh·∫£i</p>
                        </div>
                    </div>
                    <div id="analysis-box" class="mt-8 p-6 bg-amber-50 rounded-lg text-gray-700 min-h-[150px]">
                        <p class="italic text-center">Nh·∫•n v√†o t·ª´ng ph·∫ßn c·ªßa t√™n ƒë·ªÉ xem lu·∫≠n gi·∫£i chi ti·∫øt.</p>
                        <div id="deeper-analysis-content"></div>
                    </div>
                    <button id="deeper-analysis-btn" class="mt-6 w-full py-3 px-4 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition duration-300 ease-in-out flex items-center justify-center">
                        <span class="mr-2">‚ú® Lu·∫≠n gi·∫£i s√¢u h∆°n</span>
                        <div id="deeper-analysis-spinner" class="hidden loading-spinner w-5 h-5"></div>
                    </button>
                </div>
            </div>
        </section>

        <section id="fengshui" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="section-title">Lu·∫≠n Gi·∫£i Y·∫øu T·ªë Phong Th·ªßy</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Phong th·ªßy l√† m·ªôt ph·∫ßn quan tr·ªçng trong vƒÉn h√≥a ƒë·∫∑t t√™n c·ªßa ng∆∞·ªùi Vi·ªát, gi√∫p t·∫°o ra s·ª± h√†i h√≤a gi·ªØa con ng∆∞·ªùi v√† tr·ªùi ƒë·∫•t. ƒê·ªëi v·ªõi b√© trai m·ªánh H·ªèa, vi·ªác l·ª±a ch·ªçn t√™n theo nguy√™n t·∫Øc t∆∞∆°ng sinh v√† tam h·ª£p s·∫Ω mang l·∫°i nhi·ªÅu may m·∫Øn v√† thu·∫≠n l·ª£i.</p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-center mb-4 text-amber-600">Ng≈© H√†nh T∆∞∆°ng Quan</h3>
                        <p class="text-center text-sm mb-4">Bi·ªÉu ƒë·ªì th·ªÉ hi·ªán m·ªëi quan h·ªá gi·ªØa b·∫£n m·ªánh H·ªèa c·ªßa b√© v·ªõi c√°c h√†nh kh√°c. C√°c h√†nh t∆∞∆°ng sinh (M·ªôc, Th·ªï) s·∫Ω h·ªó tr·ª£, nu√¥i d∆∞·ª°ng, mang l·∫°i nƒÉng l∆∞·ª£ng t√≠ch c·ª±c.</p>
                        <div class="chart-container">
                            <canvas id="fengShuiChart"></canvas>
                        </div>
                    </div>
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-center mb-4 text-amber-600">Tam H·ª£p & T·ª© Xung</h3>
                        <p class="text-center text-sm mb-4">Trong 12 con gi√°p, tu·ªïi T·ªµ c·ªßa b√© c√≥ nh·ªØng m·ªëi quan h·ªá t∆∞∆°ng h·ª£p v√† xung kh·∫Øc, ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác ch·ªçn t√™n.</p>
                        <div class="space-y-6">
                            <div>
                                <h4 class="font-semibold text-lg text-green-600 mb-2">‚úÖ Tam H·ª£p (T·ªët)</h4>
                                <p class="mb-3 text-sm">T·ªµ, D·∫≠u v√† S·ª≠u l√† b·ªô ba con gi√°p h√≤a h·ª£p, t∆∞∆°ng tr·ª£ l·∫´n nhau, mang l·∫°i may m·∫Øn v√† b·ªÅn v·ªØng. C√°c t√™n c√≥ b·ªô th·ªß li√™n quan ƒë·∫øn D·∫≠u (G√†), S·ª≠u (Tr√¢u) r·∫•t t·ªët cho b√©.</p>
                                <div class="flex justify-center space-x-6">
                                    <span class="text-5xl" title="T·ªµ (R·∫Øn)">üêç</span>
                                    <span class="text-5xl" title="D·∫≠u (G√†)">üêì</span>
                                    <span class="text-5xl" title="S·ª≠u (Tr√¢u)">üêÉ</span>
                                </div>
                            </div>
                             <div>
                                <h4 class="font-semibold text-lg text-red-600 mb-2">‚ùå T·ª© H√†nh Xung (N√™n tr√°nh)</h4>
                                <p class="mb-3 text-sm">Tu·ªïi T·ªµ xung kh·∫Øc v·ªõi D·∫ßn, Th√¢n v√† H·ª£i. C·∫ßn tr√°nh ƒë·∫∑t t√™n c√≥ li√™n quan ƒë·∫øn c√°c con gi√°p n√†y ƒë·ªÉ cu·ªôc s·ªëng c·ªßa b√© ƒë∆∞·ª£c thu·∫≠n l·ª£i, √≠t tr·ªü ng·∫°i.</p>
                                <div class="flex justify-center space-x-6 opacity-70">
                                    <span class="text-5xl" title="D·∫ßn (H·ªï)">üêÖ</span>
                                    <span class="text-5xl" title="Th√¢n (Kh·ªâ)">üêí</span>
                                    <span class="text-5xl" title="H·ª£i (L·ª£n)">üêñ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="library" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="section-title">Th∆∞ Vi·ªán T√™n G·ª£i √ù</h2>
                 <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Ngo√†i t√™n "Nguy·ªÖn Trung Kh·∫£i", c√≤n r·∫•t nhi·ªÅu l·ª±a ch·ªçn t√™n hay v√† √Ω nghƒ©a kh√°c. B·∫°n c√≥ th·ªÉ kh√°m ph√° c√°c g·ª£i √Ω d·ª±a tr√™n nh·ªØng ph·∫©m ch·∫•t v√† mong ∆∞·ªõc m√† gia ƒë√¨nh mu·ªën g·ª≠i g·∫Øm cho b√©.</p>
                <div class="text-center mb-8 flex flex-wrap justify-center gap-3">
                    <button class="filter-btn active px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="all">T·∫•t c·∫£</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="tritue">Th√¥ng Minh, Tr√≠ Tu·ªá</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="manhme">M·∫°nh M·∫Ω, Ki√™n C∆∞·ªùng</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="mayman">May M·∫Øn, B√¨nh An</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="thanhcong">Th√†nh C√¥ng, Ph√°t ƒê·∫°t</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="daoduc">Ph·∫©m Ch·∫•t, ƒê·∫°o ƒê·ª©c</button>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-w-6xl mx-auto" id="name-grid">
                    <!-- Name items will be injected by JS -->
                </div>

                <div class="card p-6 mt-12 max-w-3xl mx-auto">
                    <h3 class="font-bold text-xl mb-4 text-amber-600 text-center">‚ú® G·ª£i √ù T√™n M·ªõi T·ª´ AI</h3>
                    <p class="text-sm text-gray-600 mb-4 text-center">Nh·∫≠p c√°c ph·∫©m ch·∫•t ho·∫∑c √Ω nghƒ©a b·∫°n mong mu·ªën cho t√™n b√© (v√≠ d·ª•: "th√¥ng minh, t√†i gi·ªèi, may m·∫Øn"):</p>
                    <textarea id="ai-name-input" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 mb-4" rows="3" placeholder="V√≠ d·ª•: th√¥ng minh, m·∫°nh m·∫Ω, b√¨nh an..."></textarea>
                    <button id="generate-ai-names-btn" class="w-full py-3 px-4 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition duration-300 ease-in-out flex items-center justify-center">
                        <span class="mr-2">‚ú® G·ª£i √Ω t√™n m·ªõi</span>
                        <div id="ai-names-spinner" class="hidden loading-spinner w-5 h-5"></div>
                    </button>
                    <div id="ai-generated-names" class="mt-6 space-y-4">
                        <!-- AI generated names will be displayed here -->
                    </div>
                </div>
            </div>
        </section>
        
        <section id="principles" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="section-title">Nguy√™n T·∫Øc ƒê·∫∑t T√™n</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Vi·ªác ƒë·∫∑t t√™n kh√¥ng ch·ªâ theo s·ªü th√≠ch m√† c√≤n c·∫ßn tu√¢n th·ªß c√°c nguy√™n t·∫Øc vƒÉn h√≥a v√† ph√°p lu·∫≠t ƒë·ªÉ ƒë·∫£m b·∫£o t√™n g·ªçi v·ª´a hay, √Ω nghƒ©a, v·ª´a mang l·∫°i nh·ªØng ƒëi·ªÅu t·ªët l√†nh cho con.</p>
                <div class="max-w-4xl mx-auto space-y-4">
                    <div class="accordion-item card p-0 overflow-hidden">
                        <button class="accordion-header w-full text-left p-6 font-bold text-lg flex justify-between items-center">
                            <span>C·∫•u tr√∫c t√™n ng∆∞·ªùi Vi·ªát</span>
                            <span class="accordion-icon text-2xl text-amber-500">+</span>
                        </button>
                        <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-6 pt-0">
                                <p>T√™n truy·ªÅn th·ªëng c√≥ c·∫•u tr√∫c: <strong>H·ªç + T√™n ƒë·ªám + T√™n ch√≠nh</strong>. H·ªç th∆∞·ªùng theo cha, t√™n ƒë·ªám b·ªï tr·ª£ √Ω nghƒ©a, v√† t√™n ch√≠nh th·ªÉ hi·ªán ∆∞·ªõc v·ªçng c·ªët l√µi. G·∫ßn ƒë√¢y, t√™n 4 ch·ªØ (H·ªç + 2 t√™n ƒë·ªám + T√™n ch√≠nh) c≈©ng tr·ªü n√™n ph·ªï bi·∫øn ƒë·ªÉ tƒÉng t√≠nh ƒë·ªôc ƒë√°o v√† √Ω nghƒ©a.</p>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item card p-0 overflow-hidden">
                        <button class="accordion-header w-full text-left p-6 font-bold text-lg flex justify-between items-center">
                            <span>Tu√¢n th·ªß ph√°p lu·∫≠t</span>
                             <span class="accordion-icon text-2xl text-amber-500">+</span>
                        </button>
                        <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-6 pt-0">
                                <p>T√™n ph·∫£i b·∫±ng ti·∫øng Vi·ªát ho·∫∑c ti·∫øng d√¢n t·ªôc kh√°c c·ªßa Vi·ªát Nam. Ph√°p lu·∫≠t kh√¥ng cho ph√©p ƒë·∫∑t t√™n b·∫±ng s·ªë, k√Ω t·ª± kh√¥ng ph·∫£i l√† ch·ªØ. T√™n kh√¥ng ƒë∆∞·ª£c x√¢m ph·∫°m quy·ªÅn v√† l·ª£i √≠ch c·ªßa ng∆∞·ªùi kh√°c.</p>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item card p-0 overflow-hidden">
                        <button class="accordion-header w-full text-left p-6 font-bold text-lg flex justify-between items-center">
                            <span>Nh·ªØng ƒëi·ªÅu c·∫ßn ki√™ng k·ªµ</span>
                             <span class="accordion-icon text-2xl text-amber-500">+</span>
                        </button>
                         <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-6 pt-0">
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>Tr√°nh t√™n ng∆∞·ªùi n·ªïi ti·∫øng, ch√≠nh kh√°ch:</strong> ƒê√¢y l√† "lu·∫≠t b·∫•t th√†nh vƒÉn" ƒë·ªÉ th·ªÉ hi·ªán s·ª± t√¥n tr·ªçng, v√≠ d·ª• nh∆∞ kh√¥ng ƒë·∫∑t t√™n l√† H·ªì Ch√≠ Minh, V√µ Nguy√™n Gi√°p.</li>
                                    <li><strong>Tr√°nh t√™n mang √Ω nghƒ©a ti√™u c·ª±c:</strong> T√™n g·ªçi g·∫Øn li·ªÅn v·ªõi v·∫≠n m·ªánh, c·∫ßn tr√°nh nh·ªØng t·ª´ ng·ªØ x·∫•u, u bu·ªìn.</li>
                                    <li><strong>Tr√°nh b·ªô th·ªß xung kh·∫Øc v·ªõi tu·ªïi:</strong> ƒê·ªëi v·ªõi tu·ªïi T·ªµ, c·∫ßn tr√°nh c√°c t√™n thu·ªôc b·ªô M·ªÖ (g·∫°o), ƒê·∫≠u, H√≤a (l√∫a) v√¨ r·∫Øn kh√¥ng ƒÉn ng≈© c·ªëc (v√≠ d·ª•: T√∫, Khoa, Tr√¨nh, L∆∞∆°ng).</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="instructions" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="section-title">H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">ƒê·ªÉ t·∫≠n d·ª•ng t·ªëi ƒëa c√°c t√≠nh nƒÉng c·ªßa c√¥ng c·ª•, vui l√≤ng tham kh·∫£o c√°c h∆∞·ªõng d·∫´n d∆∞·ªõi ƒë√¢y:</p>
                
                <div class="max-w-4xl mx-auto space-y-8">
                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-3 text-amber-600">1. Kh√°m ph√° t√™n ƒë·ªÅ xu·∫•t "Nguy·ªÖn Trung Kh·∫£i"</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Ph√¢n t√≠ch t·ª´ng ph·∫ßn t√™n:</strong> Nh·∫•p v√†o c√°c th·∫ª "H·ªç", "T√™n ƒë·ªám", "T√™n ch√≠nh" trong ph·∫ßn "T√™n Hay ƒê·ªÅ Xu·∫•t" ƒë·ªÉ xem lu·∫≠n gi·∫£i chi ti·∫øt v·ªÅ √Ω nghƒ©a v√† y·∫øu t·ªë phong th·ªßy c·ªßa t·ª´ng ph·∫ßn.</li>
                            <li><strong>Lu·∫≠n gi·∫£i s√¢u h∆°n t·ª´ AI:</strong> Nh·∫•p v√†o n√∫t <span class="font-semibold text-amber-600">"‚ú® Lu·∫≠n gi·∫£i s√¢u h∆°n"</span> ƒë·ªÉ nh·∫≠n ph√¢n t√≠ch to√†n di·ªán t·ª´ AI v·ªÅ t√™n "Nguy·ªÖn Trung Kh·∫£i", bao g·ªìm s·ª± h√†i h√≤a v·ªõi b·∫£n m·ªánh, ng≈© h√†nh v√† tam h·ª£p.</li>
                        </ul>
                    </div>

                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-3 text-amber-600">2. Kh√°m ph√° Th∆∞ vi·ªán T√™n G·ª£i √ù</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>L·ªçc theo ph·∫©m ch·∫•t:</strong> S·ª≠ d·ª•ng c√°c n√∫t l·ªçc (v√≠ d·ª•: "Th√¥ng Minh, Tr√≠ Tu·ªá", "M·∫°nh M·∫Ω, Ki√™n C∆∞·ªùng") ƒë·ªÉ xem danh s√°ch t√™n g·ª£i √Ω theo t·ª´ng nh√≥m √Ω nghƒ©a.</li>
                            <li><strong>G·ª£i √Ω t√™n m·ªõi t·ª´ AI:</strong> 
                                <ul class="list-circle list-inside ml-4 space-y-1">
                                    <li>Nh·∫≠p c√°c t·ª´ kh√≥a v·ªÅ ph·∫©m ch·∫•t ho·∫∑c √Ω nghƒ©a b·∫°n mong mu·ªën cho t√™n b√© v√†o √¥ vƒÉn b·∫£n (v√≠ d·ª•: "th√¥ng minh, t√†i gi·ªèi, may m·∫Øn").</li>
                                    <li>Nh·∫•p v√†o n√∫t <span class="font-semibold text-amber-600">"‚ú® G·ª£i √Ω t√™n m·ªõi"</span>. AI s·∫Ω t·∫°o ra 3 g·ª£i √Ω t√™n m·ªõi k√®m theo √Ω nghƒ©a v√† ghi ch√∫ phong th·ªßy ph√π h·ª£p.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-3 text-amber-600">3. T√¨m hi·ªÉu Nguy√™n t·∫Øc ƒê·∫∑t T√™n</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>M·ªü r·ªông th√¥ng tin:</strong> Nh·∫•p v√†o ti√™u ƒë·ªÅ c·ªßa t·ª´ng m·ª•c (v√≠ d·ª•: "C·∫•u tr√∫c t√™n ng∆∞·ªùi Vi·ªát", "Tu√¢n th·ªß ph√°p lu·∫≠t") ƒë·ªÉ m·ªü r·ªông v√† ƒë·ªçc chi ti·∫øt c√°c nguy√™n t·∫Øc v√† ƒëi·ªÅu ki√™ng k·ªµ khi ƒë·∫∑t t√™n.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="bg-gray-800 text-white text-center py-6">
        <p>&copy; 2025. C√¥ng c·ª• ƒë∆∞·ª£c ph√°t tri·ªÉn ƒë·ªÉ h·ªó tr·ª£ gia ƒë√¨nh Nguy·ªÖn Trung Nghƒ©a & Nguy·ªÖn Th·ªã Thu Trang.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Mobile Menu
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Name Analysis Section
            const analysisBox = document.getElementById('analysis-box');
            const deeperAnalysisContentDiv = document.getElementById('deeper-analysis-content');
            const deeperAnalysisBtn = document.getElementById('deeper-analysis-btn');
            const deeperAnalysisSpinner = document.getElementById('deeper-analysis-spinner');

            const analysisContent = {
                ho: `
                    <h4 class="font-bold text-xl mb-2">H·ªç Nguy·ªÖn</h4>
                    <p>ƒê√¢y l√† h·ªç c·ªßa cha v√† m·∫π, m·ªôt trong nh·ªØng h·ªç ph·ªï bi·∫øn nh·∫•t Vi·ªát Nam. Vi·ªác gi·ªØ h·ªç Nguy·ªÖn ƒë·∫£m b·∫£o t√≠nh k·∫ø th·ª´a, truy·ªÅn th·ªëng v√† s·ª± g·∫Øn k·∫øt gia ƒë√¨nh. V·ªõi h·ªç ph·ªï bi·∫øn, vi·ªác ch·ªçn t√™n ƒë·ªám v√† t√™n ch√≠nh ƒë·ªôc ƒë√°o, √Ω nghƒ©a c√†ng tr·ªü n√™n quan tr·ªçng.</p>
                `,
                dem: `
                    <h4 class="font-bold text-xl mb-2">T√™n ƒê·ªám: Trung</h4>
                    <ul class="list-disc list-inside space-y-1 text-left">
                        <li><strong>√ù nghƒ©a:</strong> "Trung" (Âø†) mang √Ω nghƒ©a trung th√†nh, trung th·ª±c, ch√≠nh tr·ª±c, l√† ph·∫©m ch·∫•t ƒë·∫°o ƒë·ª©c cao qu√Ω.</li>
                        <li><strong>K·∫øt n·ªëi gia ƒë√¨nh:</strong> T√™n ƒë·ªám l·∫•y t·ª´ t√™n c·ªßa b·ªë (Nguy·ªÖn Trung Nghƒ©a), th·ªÉ hi·ªán s·ª± k·∫ø th·ª´a gi√° tr·ªã t·ªët ƒë·∫πp v√† s·ª± g·∫Øn k·∫øt cha con.</li>
                        <li><strong>Phong th·ªßy:</strong> Ch·ªØ "Trung" thu·ªôc h√†nh <strong>Th·ªï</strong>. Theo Ng≈© h√†nh, H·ªèa sinh Th·ªï, r·∫•t t·ªët cho m·ªánh H·ªèa c·ªßa b√©, gi√∫p t·∫°o s·ª± ·ªïn ƒë·ªãnh, b·ªÅn v·ªØng.</li>
                    </ul>
                `,
                ten: `
                    <h4 class="font-bold text-xl mb-2">T√™n Ch√≠nh: Kh·∫£i</h4>
                     <ul class="list-disc list-inside space-y-1 text-left">
                        <li><strong>√ù nghƒ©a:</strong> "Kh·∫£i" (Âá±) c√≥ nghƒ©a l√† chi·∫øn th·∫Øng, kh·∫£i ho√†n, m·ªü ra m·ªôt t∆∞∆°ng lai r·∫°ng r·ª°, th√†nh c√¥ng.</li>
                        <li><strong>Phong th·ªßy:</strong> Ch·ªØ "Kh·∫£i" c√≥ √¢m ƒë·∫ßu "K" thu·ªôc h√†nh <strong>M·ªôc</strong>. Theo Ng≈© h√†nh, M·ªôc sinh H·ªèa, v√¥ c√πng t·ªët cho b·∫£n m·ªánh, gi√∫p nu√¥i d∆∞·ª°ng v√† ph√°t tri·ªÉn nƒÉng l∆∞·ª£ng.</li>
                        <li><strong>Tu·ªïi T·ªµ:</strong> T√™n "Kh·∫£i" kh√¥ng ph·∫°m c√°c b·ªô th·ªß ki√™ng k·ªµ, l·∫°i mang √Ω nghƒ©a chi·∫øn th·∫Øng, r·∫•t h·ª£p v·ªõi t√≠nh c√°ch m·∫°nh m·∫Ω, quy·∫øt ƒëo√°n c·ªßa ng∆∞·ªùi tu·ªïi T·ªµ.</li>
                    </ul>
                `
            };

            document.getElementById('card-ho').addEventListener('click', () => updateAnalysis('ho'));
            document.getElementById('card-dem').addEventListener('click', () => updateAnalysis('dem'));
            document.getElementById('card-ten').addEventListener('click', () => updateAnalysis('ten'));

            function updateAnalysis(part) {
                deeperAnalysisContentDiv.innerHTML = ''; // Clear deeper analysis when clicking static cards
                analysisBox.querySelector('p.italic').style.display = 'block'; // Show "Nh·∫•n v√†o t·ª´ng ph·∫ßn..."
                analysisBox.innerHTML = analysisContent[part] + '<div id="deeper-analysis-content"></div>'; // Re-add deeper analysis div
                document.querySelectorAll('#recommendation [id^="card-"]').forEach(c => c.classList.remove('bg-amber-100', 'ring-2', 'ring-amber-500'));
                document.getElementById(`card-${part}`).classList.add('bg-amber-100', 'ring-2', 'ring-amber-500');
            }

            // Gemini API Integration - Deeper Name Analysis
            deeperAnalysisBtn.addEventListener('click', async () => {
                deeperAnalysisSpinner.classList.remove('hidden');
                deeperAnalysisBtn.disabled = true;
                analysisBox.querySelector('p.italic').style.display = 'none'; // Hide "Nh·∫•n v√†o t·ª´ng ph·∫ßn..."
                deeperAnalysisContentDiv.innerHTML = ''; // Clear previous content

                const prompt = `B·∫°n l√† chuy√™n gia phong th·ªßy v√† ƒë·∫∑t t√™n. Lu·∫≠n gi·∫£i s√¢u h∆°n v·ªÅ √Ω nghƒ©a c·ªßa t√™n 'Nguy·ªÖn Trung Kh·∫£i' cho b√© trai d·ª± sinh 11/01/2026 (·∫§t T·ªµ, m·ªánh H·ªèa - Ph√∫ ƒêƒÉng H·ªèa), cha Nguy·ªÖn Trung Nghƒ©a, m·∫π Nguy·ªÖn Th·ªã Thu Trang. Ph√¢n t√≠ch s·ª± h√†i h√≤a c·ªßa t√™n v·ªõi b·∫£n m·ªánh H·ªèa, Ng≈© h√†nh t∆∞∆°ng sinh (M·ªôc, Th·ªï), v√† m·ªëi quan h·ªá Tam h·ª£p (T·ªµ, D·∫≠u, S·ª≠u). ƒê·ªìng th·ªùi, gi·∫£i th√≠ch √Ω nghƒ©a t·ª´ng ch·ªØ trong t√™n v√† t·ªïng h√≤a √Ω nghƒ©a c·ªßa c·∫£ c√°i t√™n.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "AIzaSyBaLi7TzZJ9SwmHilU24SRcV2i7lU6gqdQ"; // Leave this as-is. Canvas will provide the API key.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        deeperAnalysisContentDiv.innerHTML = `<div class="mt-4 p-4 bg-amber-100 rounded-lg border border-amber-200">${text.replace(/\n/g, '<br>')}</div>`;
                    } else {
                        deeperAnalysisContentDiv.innerHTML = `<p class="text-red-500 mt-4">Kh√¥ng th·ªÉ t·∫°o lu·∫≠n gi·∫£i s√¢u h∆°n. Vui l√≤ng th·ª≠ l·∫°i.</p>`;
                    }
                } catch (error) {
                    console.error('Error calling Gemini API for deeper analysis:', error);
                    deeperAnalysisContentDiv.innerHTML = `<p class="text-red-500 mt-4">ƒê√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi AI. Vui l√≤ng th·ª≠ l·∫°i.</p>`;
                } finally {
                    deeperAnalysisSpinner.classList.add('hidden');
                    deeperAnalysisBtn.disabled = false;
                }
            });


            // Feng Shui Chart
            const ctx = document.getElementById('fengShuiChart').getContext('2d');
            new Chart(ctx, {
                type: 'polarArea',
                data: {
                    labels: ['M·ªôc (T∆∞∆°ng Sinh)', 'Th·ªï (T∆∞∆°ng Sinh)', 'H·ªèa (B·∫£n M·ªánh)', 'Kim (Kh·∫Øc)', 'Th·ªßy (Kh·∫Øc)'],
                    datasets: [{
                        label: 'M·ª©c ƒë·ªô t∆∞∆°ng h·ª£p',
                        data: [5, 4, 3, 2, 1],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.6)', // green-500
                            'rgba(202, 138, 4, 0.6)',  // yellow-600
                            'rgba(220, 38, 38, 0.6)',  // red-600
                            'rgba(107, 114, 128, 0.6)',// gray-500
                            'rgba(37, 99, 235, 0.6)'  // blue-600
                        ],
                        borderColor: [
                            'rgba(5, 150, 105, 1)',
                            'rgba(161, 98, 7, 1)',
                            'rgba(185, 28, 28, 1)',
                            'rgba(75, 85, 99, 1)',
                            'rgba(29, 78, 216, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            pointLabels: {
                                display: true,
                                centerPointLabels: true,
                                font: {
                                    size: 13,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += ['R·∫•t T·ªët', 'T·ªët', 'H√≤a H·ª£p', 'N√™n C√¢n Nh·∫Øc', 'N√™n Tr√°nh'][context.dataIndex];
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            // Name Library - Static Names
            const namesData = [
                { name: 'Minh Tri·∫øt', category: 'tritue' }, { name: 'ƒêƒÉng Khoa', category: 'tritue' }, { name: 'Anh Minh', category: 'tritue' }, { name: 'Minh Tr√≠', category: 'tritue' },
                { name: 'Vi·ªát D≈©ng', category: 'manhme' }, { name: 'Ch√≠ Ki√™n', category: 'manhme' }, { name: 'ƒê·ª©c M·∫°nh', category: 'manhme' }, { name: 'H√πng D≈©ng', category: 'manhme' },
                { name: 'An Khang', category: 'mayman' }, { name: 'Thi√™n Ph√∫c', category: 'mayman' }, { name: 'H·ªØu Ph∆∞·ªõc', category: 'mayman' }, { name: 'B·∫£o An', category: 'mayman' },
                { name: 'Th√†nh ƒê·∫°t', category: 'thanhcong' }, { name: 'Quang Vinh', category: 'thanhcong' }, { name: 'Ti·∫øn Th√†nh', category: 'thanhcong' }, { name: 'Ph√∫ ƒê·∫°t', category: 'thanhcong' },
                { name: 'Minh ƒê·ª©c', category: 'daoduc' }, { name: 'Trung Nghƒ©a', category: 'daoduc' }, { name: 'ƒê·ª©c Vi·ªát', category: 'daoduc' }, { name: 'Tr·ªçng Nghƒ©a', category: 'daoduc' }
            ];

            const nameGrid = document.getElementById('name-grid');
            const filterButtons = document.querySelectorAll('#library .filter-btn');
            const aiNameInput = document.getElementById('ai-name-input');
            const generateAiNamesBtn = document.getElementById('generate-ai-names-btn');
            const aiNamesSpinner = document.getElementById('ai-names-spinner');
            const aiGeneratedNamesDiv = document.getElementById('ai-generated-names');

            function displayNames(filter) {
                nameGrid.innerHTML = '';
                const filteredNames = (filter === 'all') ? namesData : namesData.filter(n => n.category === filter);
                filteredNames.forEach(item => {
                    const nameDiv = document.createElement('div');
                    nameDiv.className = 'name-item p-4 bg-white rounded-lg shadow-sm text-center font-semibold text-gray-700 border border-gray-200';
                    nameDiv.textContent = item.name;
                    nameGrid.appendChild(nameDiv);
                });
            }

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    displayNames(button.dataset.filter);
                });
            });

            displayNames('all');
            
            // Gemini API Integration - Generate New Names
            generateAiNamesBtn.addEventListener('click', async () => {
                const traits = aiNameInput.value.trim();
                if (!traits) {
                    aiGeneratedNamesDiv.innerHTML = `<p class="text-red-500">Vui l√≤ng nh·∫≠p c√°c ph·∫©m ch·∫•t mong mu·ªën.</p>`;
                    return;
                }

                aiNamesSpinner.classList.remove('hidden');
                generateAiNamesBtn.disabled = true;
                aiGeneratedNamesDiv.innerHTML = '';

                const prompt = `B·∫°n l√† chuy√™n gia ƒë·∫∑t t√™n ti·∫øng Vi·ªát. H√£y g·ª£i √Ω 3 t√™n b√© trai h·ªç Nguy·ªÖn, d·ª± sinh 11/01/2026 (·∫§t T·ªµ, m·ªánh H·ªèa - Ph√∫ ƒêƒÉng H·ªèa), c√≥ t√™n ƒë·ªám l√† 'Trung' ho·∫∑c 'Kh·∫£i', v√† mang √Ω nghƒ©a v·ªÅ ${traits}. ƒê·∫£m b·∫£o t√™n h·ª£p phong th·ªßy Ng≈© h√†nh (M·ªôc sinh H·ªèa, H·ªèa sinh Th·ªï), tr√°nh t·ª© h√†nh xung (D·∫ßn, Th√¢n, H·ª£i) v√† c√°c b·ªô th·ªß ki√™ng k·ªµ (M·ªÖ, ƒê·∫≠u, H√≤a).
Tr·∫£ l·ªùi d∆∞·ªõi d·∫°ng JSON ARRAY, m·ªói ph·∫ßn t·ª≠ l√† m·ªôt OBJECT c√≥ c√°c thu·ªôc t√≠nh:
- \`name\`: T√™n ƒë·∫ßy ƒë·ªß (v√≠ d·ª•: Nguy·ªÖn Trung An)
- \`meaning\`: √ù nghƒ©a ng·∫Øn g·ªçn c·ªßa t√™n
- \`fengshui_notes\`: Ghi ch√∫ v·ªÅ s·ª± h√†i h√≤a phong th·ªßy (v√≠ d·ª•: H·ª£p m·ªánh H·ªèa, M·ªôc sinh H·ªèa)
`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: {
                                type: "OBJECT",
                                properties: {
                                    "name": { "type": "STRING" },
                                    "meaning": { "type": "STRING" },
                                    "fengshui_notes": { "type": "STRING" }
                                },
                                "propertyOrdering": ["name", "meaning", "fengshui_notes"]
                            }
                        }
                    }
                };
                const apiKey = "AIzaSyBaLi7TzZJ9SwmHilU24SRcV2i7lU6gqdQ"; // Leave this as-is. Canvas will provide the API key.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const json = result.candidates[0].content.parts[0].text;
                        const parsedJson = JSON.parse(json);
                        
                        if (parsedJson.length > 0) {
                            parsedJson.forEach(item => {
                                const nameCard = document.createElement('div');
                                nameCard.className = 'card p-4 border border-amber-200 bg-amber-50';
                                nameCard.innerHTML = `
                                    <p class="text-lg font-bold text-amber-700">${item.name}</p>
                                    <p class="text-sm text-gray-600 mt-1">√ù nghƒ©a: ${item.meaning}</p>
                                    <p class="text-xs text-gray-500 mt-1">Phong th·ªßy: ${item.fengshui_notes}</p>
                                `;
                                aiGeneratedNamesDiv.appendChild(nameCard);
                            });
                        } else {
                            aiGeneratedNamesDiv.innerHTML = `<p class="text-gray-600">Kh√¥ng t√¨m th·∫•y g·ª£i √Ω t√™n n√†o ph√π h·ª£p.</p>`;
                        }

                    } else {
                        aiGeneratedNamesDiv.innerHTML = `<p class="text-red-500">Kh√¥ng th·ªÉ t·∫°o g·ª£i √Ω t√™n. Vui l√≤ng th·ª≠ l·∫°i.</p>`;
                    }
                } catch (error) {
                    console.error('Error calling Gemini API for new names:', error);
                    aiGeneratedNamesDiv.innerHTML = `<p class="text-red-500">ƒê√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi AI. Vui l√≤ng th·ª≠ l·∫°i.</p>`;
                } finally {
                    aiNamesSpinner.classList.add('hidden');
                    generateAiNamesBtn.disabled = false;
                }
            });


            // Accordion
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('.accordion-icon');
                    
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        icon.textContent = '+';
                    } else {
                        // Close other accordions
                        document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                        document.querySelectorAll('.accordion-icon').forEach(i => i.textContent = '+');
                        
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.textContent = '-';
                    }
                });
            });

            // Active nav link on scroll
            const sections = document.querySelectorAll('main section');
            const navLinks = document.querySelectorAll('nav a.nav-link');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active-nav');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active-nav');
                    }
                });
            });

        });
    </script>
</body>
</html>

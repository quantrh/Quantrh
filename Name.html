<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CÃ´ng Cá»¥ Gá»£i Ã TÃªn BÃ© Trai - Há» Nguyá»…n 2025 (áº¤t Tá»µ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthy Harmony -->
    <!-- Application Structure Plan: TÃ´i Ä‘Ã£ thiáº¿t káº¿ má»™t á»©ng dá»¥ng má»™t trang (SPA) vá»›i cáº¥u trÃºc theo tá»«ng pháº§n chuyÃªn biá»‡t, cÃ³ thanh Ä‘iá»u hÆ°á»›ng cá»‘ Ä‘á»‹nh Ä‘á»ƒ ngÆ°á»i dÃ¹ng dá»… dÃ ng di chuyá»ƒn. Cáº¥u trÃºc nÃ y khÃ´ng sao chÃ©p bÃ¡o cÃ¡o gá»‘c mÃ  tá»• chá»©c láº¡i thÃ´ng tin theo má»™t luá»“ng logic, láº¥y ngÆ°á»i dÃ¹ng lÃ m trung tÃ¢m: (1) Giá»›i thiá»‡u tá»•ng quan vÃ  tÃªn Ä‘á» xuáº¥t chÃ­nh. (2) PhÃ¢n tÃ­ch sÃ¢u tÃªn Ä‘á» xuáº¥t qua cÃ¡c tháº» tÆ°Æ¡ng tÃ¡c. (3) Trá»±c quan hÃ³a cÃ¡c quy táº¯c Phong thá»§y phá»©c táº¡p (NgÅ© HÃ nh, Tam Há»£p) báº±ng biá»ƒu Ä‘á»“ vÃ  icon. (4) Má»™t thÆ° viá»‡n tÃªn cÃ³ thá»ƒ lá»c Ä‘á»ƒ khÃ¡m phÃ¡ cÃ¡c lá»±a chá»n thay tháº¿. (5) TÃ³m táº¯t cÃ¡c nguyÃªn táº¯c Ä‘áº·t tÃªn. Cáº¥u trÃºc nÃ y giÃºp ngÆ°á»i dÃ¹ng tiÃªu hÃ³a thÃ´ng tin tá»« tá»•ng quan Ä‘áº¿n chi tiáº¿t, tá»« Ä‘á» xuáº¥t chÃ­nh Ä‘áº¿n cÃ¡c lá»±a chá»n khÃ¡c má»™t cÃ¡ch trá»±c quan vÃ  háº¥p dáº«n. -->
    <!-- Visualization & Content Choices: BÃ¡o cÃ¡o -> Má»¥c tiÃªu -> PhÆ°Æ¡ng phÃ¡p -> TÆ°Æ¡ng tÃ¡c -> LÃ½ do. | ThÃ´ng tin bÃ© -> ThÃ´ng bÃ¡o -> Báº£ng Ä‘iá»u khiá»ƒn -> TÄ©nh -> Cung cáº¥p bá»‘i cáº£nh ngay láº­p tá»©c. | TÃªn "Nguyá»…n Trung Kháº£i" -> Giáº£i thÃ­ch -> Tháº» láº­t tÆ°Æ¡ng tÃ¡c -> Click -> Cho phÃ©p khÃ¡m phÃ¡ sÃ¢u tá»«ng thÃ nh pháº§n tÃªn mÃ  khÃ´ng bá»‹ choÃ¡ng ngá»£p. | Quy táº¯c NgÅ© HÃ nh -> So sÃ¡nh/Hiá»ƒu -> Biá»ƒu Ä‘á»“ Polar Area cá»§a Chart.js -> Hover -> Biáº¿n dá»¯ liá»‡u phá»©c táº¡p thÃ nh hÃ¬nh áº£nh trá»±c quan, dá»… so sÃ¡nh. | Quy táº¯c Tam Há»£p/Tá»© Xung -> So sÃ¡nh -> NhÃ³m icon HTML/CSS -> TÄ©nh -> CÃ¡ch trÃ¬nh bÃ y Ä‘Æ¡n giáº£n, rÃµ rÃ ng cho cÃ¡c má»‘i quan há»‡. | Danh sÃ¡ch tÃªn gá»£i Ã½ -> KhÃ¡m phÃ¡ -> Danh sÃ¡ch cÃ³ thá»ƒ lá»c -> Click nÃºt -> TÄƒng tÃ­nh tÆ°Æ¡ng tÃ¡c, cho phÃ©p ngÆ°á»i dÃ¹ng tÃ¬m tÃªn theo Ã½ muá»‘n. | NguyÃªn táº¯c chung -> Tá»• chá»©c -> Pháº§n tá»­ accordion/toggle -> Click -> Tiáº¿t kiá»‡m khÃ´ng gian, trÃ¬nh bÃ y thÃ´ng tin dÃ y Ä‘áº·c má»™t cÃ¡ch gá»n gÃ ng. | ThÆ° viá»‡n sá»­ dá»¥ng: Chart.js cho biá»ƒu Ä‘á»“ Canvas, TailwindCSS vÃ  Vanilla JS cho toÃ n bá»™ cáº¥u trÃºc vÃ  tÆ°Æ¡ng tÃ¡c. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
        }
        .section-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #4A5568; /* gray-700 */
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: #F59E0B; /* amber-500 */
            margin: 0.5rem auto 0;
            border-radius: 2px;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .nav-link {
             transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover {
            color: #F59E0B; /* amber-500 */
        }
        .active-nav {
            color: #F59E0B; /* amber-500 */
            border-bottom: 2px solid #F59E0B;
        }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 450px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 350px;
            max-height: 400px; 
        }
        @media (min-width: 768px) { 
            .chart-container { 
                height: 400px; 
            } 
        }
        .filter-btn {
            transition: all 0.3s ease;
        }
        .filter-btn.active {
            background-color: #D97706; /* amber-600 */
            color: white;
            transform: scale(1.05);
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #F59E0B;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-700">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-gray-800">
                <a href="#home">Äáº·t TÃªn Cho BÃ©</a>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#recommendation" class="nav-link text-gray-600 font-semibold pb-1">TÃªn Äá» Xuáº¥t</a>
                <a href="#fengshui" class="nav-link text-gray-600 font-semibold pb-1">Luáº­n Giáº£i Phong Thá»§y</a>
                <a href="#library" class="nav-link text-gray-600 font-semibold pb-1">ThÆ° Viá»‡n TÃªn</a>
                <a href="#principles" class="nav-link text-gray-600 font-semibold pb-1">NguyÃªn Táº¯c</a>
                <a href="#instructions" class="nav-link text-gray-600 font-semibold pb-1">HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
             <a href="#recommendation" class="block py-2 text-gray-600 font-semibold">TÃªn Äá» Xuáº¥t</a>
             <a href="#fengshui" class="block py-2 text-gray-600 font-semibold">Luáº­n Giáº£i Phong Thá»§y</a>
             <a href="#library" class="block py-2 text-gray-600 font-semibold">ThÆ° Viá»‡n TÃªn</a>
             <a href="#principles" class="block py-2 text-gray-600 font-semibold">NguyÃªn Táº¯c</a>
             <a href="#instructions" class="block py-2 text-gray-600 font-semibold">HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</a>
        </div>
    </header>

    <main>
        <section id="home" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">CÃ´ng Cá»¥ Gá»£i Ã TÃªn Cho BÃ© Trai</h1>
                <p class="text-lg text-gray-600 mb-8">Dá»±a trÃªn phÃ¢n tÃ­ch vÄƒn hÃ³a, phong thá»§y cho bÃ© trai há» Nguyá»…n, dá»± sinh 11/01/2026.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto text-left">
                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-2 text-amber-600">ğŸ‘¤ ThÃ´ng Tin BÃ©</h3>
                        <p><strong>Há»:</strong> Nguyá»…n</p>
                        <p><strong>Dá»± sinh:</strong> 11/01/2026</p>
                        <p><strong>Cha:</strong> Nguyá»…n Trung NghÄ©a</p>
                         <p><strong>Máº¹:</strong> Nguyá»…n Thá»‹ Thu Trang</p>
                    </div>
                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-2 text-amber-600">ğŸ—“ï¸ Ã‚m Lá»‹ch & Con GiÃ¡p</h3>
                        <p><strong>NÄƒm Ã¢m lá»‹ch:</strong> áº¤t Tá»µ (2025)</p>
                        <p><strong>Con giÃ¡p:</strong> Ráº¯n (Tá»µ)</p>
                        <p><strong>ThiÃªn Can:</strong> áº¤t</p>
                        <p><strong>Äá»‹a Chi:</strong> Tá»µ</p>
                    </div>
                    <div class="card p-6">
                         <h3 class="font-bold text-xl mb-2 text-amber-600">ğŸ”¥ NgÅ© HÃ nh</h3>
                        <p><strong>Báº£n má»‡nh:</strong> Há»a</p>
                        <p><strong>Náº¡p Ã¢m:</strong> PhÃº ÄÄƒng Há»a</p>
                        <p class="italic text-sm">(Lá»­a Ä‘Ã¨n dáº§u)</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="recommendation" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="section-title">TÃªn Hay Äá» Xuáº¥t</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Sau khi tá»•ng há»£p cÃ¡c yáº¿u tá»‘ vá» vÄƒn hÃ³a, Ã½ nghÄ©a, vÃ  sá»± hÃ i hÃ²a phong thá»§y, Ä‘Ã¢y lÃ  cÃ¡i tÃªn Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ lÃ  tá»‘t nháº¥t, há»™i tá»¥ nhiá»u giÃ¡ trá»‹ tá»‘t Ä‘áº¹p, gá»­i gáº¯m hy vá»ng vá» má»™t tÆ°Æ¡ng lai tÆ°Æ¡i sÃ¡ng, thÃ nh cÃ´ng vÃ  trá»n váº¹n cho bÃ©.</p>
                
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-3xl mx-auto">
                    <h3 class="text-center text-5xl font-bold text-amber-600 tracking-wider mb-8">Nguyá»…n Trung Kháº£i</h3>
                    <div class="grid md:grid-cols-3 gap-6 text-center">
                        <div id="card-ho" class="p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-amber-50">
                            <p class="text-sm text-gray-500">Há»</p>
                            <p class="text-3xl font-semibold text-gray-800">Nguyá»…n</p>
                        </div>
                        <div id="card-dem" class="p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-amber-50">
                            <p class="text-sm text-gray-500">TÃªn Ä‘á»‡m</p>
                            <p class="text-3xl font-semibold text-gray-800">Trung</p>
                        </div>
                        <div id="card-ten" class="p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-amber-50">
                            <p class="text-sm text-gray-500">TÃªn chÃ­nh</p>
                            <p class="text-3xl font-semibold text-gray-800">Kháº£i</p>
                        </div>
                    </div>
                    <div id="analysis-box" class="mt-8 p-6 bg-amber-50 rounded-lg text-gray-700 min-h-[150px]">
                        <p class="italic text-center">Nháº¥n vÃ o tá»«ng pháº§n cá»§a tÃªn Ä‘á»ƒ xem luáº­n giáº£i chi tiáº¿t.</p>
                        <div id="deeper-analysis-content"></div>
                    </div>
                    <button id="deeper-analysis-btn" class="mt-6 w-full py-3 px-4 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition duration-300 ease-in-out flex items-center justify-center">
                        <span class="mr-2">âœ¨ Luáº­n giáº£i sÃ¢u hÆ¡n</span>
                        <div id="deeper-analysis-spinner" class="hidden loading-spinner w-5 h-5"></div>
                    </button>
                </div>
            </div>
        </section>

        <section id="fengshui" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="section-title">Luáº­n Giáº£i Yáº¿u Tá»‘ Phong Thá»§y</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Phong thá»§y lÃ  má»™t pháº§n quan trá»ng trong vÄƒn hÃ³a Ä‘áº·t tÃªn cá»§a ngÆ°á»i Viá»‡t, giÃºp táº¡o ra sá»± hÃ i hÃ²a giá»¯a con ngÆ°á»i vÃ  trá»i Ä‘áº¥t. Äá»‘i vá»›i bÃ© trai má»‡nh Há»a, viá»‡c lá»±a chá»n tÃªn theo nguyÃªn táº¯c tÆ°Æ¡ng sinh vÃ  tam há»£p sáº½ mang láº¡i nhiá»u may máº¯n vÃ  thuáº­n lá»£i.</p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-center mb-4 text-amber-600">NgÅ© HÃ nh TÆ°Æ¡ng Quan</h3>
                        <p class="text-center text-sm mb-4">Biá»ƒu Ä‘á»“ thá»ƒ hiá»‡n má»‘i quan há»‡ giá»¯a báº£n má»‡nh Há»a cá»§a bÃ© vá»›i cÃ¡c hÃ nh khÃ¡c. CÃ¡c hÃ nh tÆ°Æ¡ng sinh (Má»™c, Thá»•) sáº½ há»— trá»£, nuÃ´i dÆ°á»¡ng, mang láº¡i nÄƒng lÆ°á»£ng tÃ­ch cá»±c.</p>
                        <div class="chart-container">
                            <canvas id="fengShuiChart"></canvas>
                        </div>
                    </div>
                    <div class="card p-8">
                        <h3 class="text-2xl font-bold text-center mb-4 text-amber-600">Tam Há»£p & Tá»© Xung</h3>
                        <p class="text-center text-sm mb-4">Trong 12 con giÃ¡p, tuá»•i Tá»µ cá»§a bÃ© cÃ³ nhá»¯ng má»‘i quan há»‡ tÆ°Æ¡ng há»£p vÃ  xung kháº¯c, áº£nh hÆ°á»Ÿng Ä‘áº¿n viá»‡c chá»n tÃªn.</p>
                        <div class="space-y-6">
                            <div>
                                <h4 class="font-semibold text-lg text-green-600 mb-2">âœ… Tam Há»£p (Tá»‘t)</h4>
                                <p class="mb-3 text-sm">Tá»µ, Dáº­u vÃ  Sá»­u lÃ  bá»™ ba con giÃ¡p hÃ²a há»£p, tÆ°Æ¡ng trá»£ láº«n nhau, mang láº¡i may máº¯n vÃ  bá»n vá»¯ng. CÃ¡c tÃªn cÃ³ bá»™ thá»§ liÃªn quan Ä‘áº¿n Dáº­u (GÃ ), Sá»­u (TrÃ¢u) ráº¥t tá»‘t cho bÃ©.</p>
                                <div class="flex justify-center space-x-6">
                                    <span class="text-5xl" title="Tá»µ (Ráº¯n)">ğŸ</span>
                                    <span class="text-5xl" title="Dáº­u (GÃ )">ğŸ“</span>
                                    <span class="text-5xl" title="Sá»­u (TrÃ¢u)">ğŸƒ</span>
                                </div>
                            </div>
                             <div>
                                <h4 class="font-semibold text-lg text-red-600 mb-2">âŒ Tá»© HÃ nh Xung (NÃªn trÃ¡nh)</h4>
                                <p class="mb-3 text-sm">Tuá»•i Tá»µ xung kháº¯c vá»›i Dáº§n, ThÃ¢n vÃ  Há»£i. Cáº§n trÃ¡nh Ä‘áº·t tÃªn cÃ³ liÃªn quan Ä‘áº¿n cÃ¡c con giÃ¡p nÃ y Ä‘á»ƒ cuá»™c sá»‘ng cá»§a bÃ© Ä‘Æ°á»£c thuáº­n lá»£i, Ã­t trá»Ÿ ngáº¡i.</p>
                                <div class="flex justify-center space-x-6 opacity-70">
                                    <span class="text-5xl" title="Dáº§n (Há»•)">ğŸ…</span>
                                    <span class="text-5xl" title="ThÃ¢n (Khá»‰)">ğŸ’</span>
                                    <span class="text-5xl" title="Há»£i (Lá»£n)">ğŸ–</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="library" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="section-title">ThÆ° Viá»‡n TÃªn Gá»£i Ã</h2>
                 <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">NgoÃ i tÃªn "Nguyá»…n Trung Kháº£i", cÃ²n ráº¥t nhiá»u lá»±a chá»n tÃªn hay vÃ  Ã½ nghÄ©a khÃ¡c. Báº¡n cÃ³ thá»ƒ khÃ¡m phÃ¡ cÃ¡c gá»£i Ã½ dá»±a trÃªn nhá»¯ng pháº©m cháº¥t vÃ  mong Æ°á»›c mÃ  gia Ä‘Ã¬nh muá»‘n gá»­i gáº¯m cho bÃ©.</p>
                <div class="text-center mb-8 flex flex-wrap justify-center gap-3">
                    <button class="filter-btn active px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="all">Táº¥t cáº£</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="tritue">ThÃ´ng Minh, TrÃ­ Tuá»‡</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="manhme">Máº¡nh Máº½, KiÃªn CÆ°á»ng</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="mayman">May Máº¯n, BÃ¬nh An</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="thanhcong">ThÃ nh CÃ´ng, PhÃ¡t Äáº¡t</button>
                    <button class="filter-btn px-4 py-2 bg-white border border-amber-500 text-amber-600 font-semibold rounded-full" data-filter="daoduc">Pháº©m Cháº¥t, Äáº¡o Äá»©c</button>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-w-6xl mx-auto" id="name-grid">
                    <!-- Name items will be injected by JS -->
                </div>

                <div class="card p-6 mt-12 max-w-3xl mx-auto">
                    <h3 class="font-bold text-xl mb-4 text-amber-600 text-center">âœ¨ Gá»£i Ã TÃªn Má»›i Tá»« AI</h3>
                    <p class="text-sm text-gray-600 mb-4 text-center">Nháº­p cÃ¡c pháº©m cháº¥t hoáº·c Ã½ nghÄ©a báº¡n mong muá»‘n cho tÃªn bÃ© (vÃ­ dá»¥: "thÃ´ng minh, tÃ i giá»i, may máº¯n"):</p>
                    <textarea id="ai-name-input" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 mb-4" rows="3" placeholder="VÃ­ dá»¥: thÃ´ng minh, máº¡nh máº½, bÃ¬nh an..."></textarea>
                    <button id="generate-ai-names-btn" class="w-full py-3 px-4 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition duration-300 ease-in-out flex items-center justify-center">
                        <span class="mr-2">âœ¨ Gá»£i Ã½ tÃªn má»›i</span>
                        <div id="ai-names-spinner" class="hidden loading-spinner w-5 h-5"></div>
                    </button>
                    <div id="ai-generated-names" class="mt-6 space-y-4">
                        <!-- AI generated names will be displayed here -->
                    </div>
                </div>
            </div>
        </section>
        
        <section id="principles" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="section-title">NguyÃªn Táº¯c Äáº·t TÃªn</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Viá»‡c Ä‘áº·t tÃªn khÃ´ng chá»‰ theo sá»Ÿ thÃ­ch mÃ  cÃ²n cáº§n tuÃ¢n thá»§ cÃ¡c nguyÃªn táº¯c vÄƒn hÃ³a vÃ  phÃ¡p luáº­t Ä‘á»ƒ Ä‘áº£m báº£o tÃªn gá»i vá»«a hay, Ã½ nghÄ©a, vá»«a mang láº¡i nhá»¯ng Ä‘iá»u tá»‘t lÃ nh cho con.</p>
                <div class="max-w-4xl mx-auto space-y-4">
                    <div class="accordion-item card p-0 overflow-hidden">
                        <button class="accordion-header w-full text-left p-6 font-bold text-lg flex justify-between items-center">
                            <span>Cáº¥u trÃºc tÃªn ngÆ°á»i Viá»‡t</span>
                            <span class="accordion-icon text-2xl text-amber-500">+</span>
                        </button>
                        <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-6 pt-0">
                                <p>TÃªn truyá»n thá»‘ng cÃ³ cáº¥u trÃºc: <strong>Há» + TÃªn Ä‘á»‡m + TÃªn chÃ­nh</strong>. Há» thÆ°á»ng theo cha, tÃªn Ä‘á»‡m bá»• trá»£ Ã½ nghÄ©a, vÃ  tÃªn chÃ­nh thá»ƒ hiá»‡n Æ°á»›c vá»ng cá»‘t lÃµi. Gáº§n Ä‘Ã¢y, tÃªn 4 chá»¯ (Há» + 2 tÃªn Ä‘á»‡m + TÃªn chÃ­nh) cÅ©ng trá»Ÿ nÃªn phá»• biáº¿n Ä‘á»ƒ tÄƒng tÃ­nh Ä‘á»™c Ä‘Ã¡o vÃ  Ã½ nghÄ©a.</p>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item card p-0 overflow-hidden">
                        <button class="accordion-header w-full text-left p-6 font-bold text-lg flex justify-between items-center">
                            <span>TuÃ¢n thá»§ phÃ¡p luáº­t</span>
                             <span class="accordion-icon text-2xl text-amber-500">+</span>
                        </button>
                        <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-6 pt-0">
                                <p>TÃªn pháº£i báº±ng tiáº¿ng Viá»‡t hoáº·c tiáº¿ng dÃ¢n tá»™c khÃ¡c cá»§a Viá»‡t Nam. PhÃ¡p luáº­t khÃ´ng cho phÃ©p Ä‘áº·t tÃªn báº±ng sá»‘, kÃ½ tá»± khÃ´ng pháº£i lÃ  chá»¯. TÃªn khÃ´ng Ä‘Æ°á»£c xÃ¢m pháº¡m quyá»n vÃ  lá»£i Ã­ch cá»§a ngÆ°á»i khÃ¡c.</p>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item card p-0 overflow-hidden">
                        <button class="accordion-header w-full text-left p-6 font-bold text-lg flex justify-between items-center">
                            <span>Nhá»¯ng Ä‘iá»u cáº§n kiÃªng ká»µ</span>
                             <span class="accordion-icon text-2xl text-amber-500">+</span>
                        </button>
                         <div class="accordion-content max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                            <div class="p-6 pt-0">
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>TrÃ¡nh tÃªn ngÆ°á»i ná»•i tiáº¿ng, chÃ­nh khÃ¡ch:</strong> ÄÃ¢y lÃ  "luáº­t báº¥t thÃ nh vÄƒn" Ä‘á»ƒ thá»ƒ hiá»‡n sá»± tÃ´n trá»ng, vÃ­ dá»¥ nhÆ° khÃ´ng Ä‘áº·t tÃªn lÃ  Há»“ ChÃ­ Minh, VÃµ NguyÃªn GiÃ¡p.</li>
                                    <li><strong>TrÃ¡nh tÃªn mang Ã½ nghÄ©a tiÃªu cá»±c:</strong> TÃªn gá»i gáº¯n liá»n vá»›i váº­n má»‡nh, cáº§n trÃ¡nh nhá»¯ng tá»« ngá»¯ xáº¥u, u buá»“n.</li>
                                    <li><strong>TrÃ¡nh bá»™ thá»§ xung kháº¯c vá»›i tuá»•i:</strong> Äá»‘i vá»›i tuá»•i Tá»µ, cáº§n trÃ¡nh cÃ¡c tÃªn thuá»™c bá»™ Má»… (gáº¡o), Äáº­u, HÃ²a (lÃºa) vÃ¬ ráº¯n khÃ´ng Äƒn ngÅ© cá»‘c (vÃ­ dá»¥: TÃº, Khoa, TrÃ¬nh, LÆ°Æ¡ng).</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="instructions" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="section-title">HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Äá»ƒ táº­n dá»¥ng tá»‘i Ä‘a cÃ¡c tÃ­nh nÄƒng cá»§a cÃ´ng cá»¥, vui lÃ²ng tham kháº£o cÃ¡c hÆ°á»›ng dáº«n dÆ°á»›i Ä‘Ã¢y:</p>
                
                <div class="max-w-4xl mx-auto space-y-8">
                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-3 text-amber-600">1. KhÃ¡m phÃ¡ tÃªn Ä‘á» xuáº¥t "Nguyá»…n Trung Kháº£i"</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>PhÃ¢n tÃ­ch tá»«ng pháº§n tÃªn:</strong> Nháº¥p vÃ o cÃ¡c tháº» "Há»", "TÃªn Ä‘á»‡m", "TÃªn chÃ­nh" trong pháº§n "TÃªn Hay Äá» Xuáº¥t" Ä‘á»ƒ xem luáº­n giáº£i chi tiáº¿t vá» Ã½ nghÄ©a vÃ  yáº¿u tá»‘ phong thá»§y cá»§a tá»«ng pháº§n.</li>
                            <li><strong>Luáº­n giáº£i sÃ¢u hÆ¡n tá»« AI:</strong> Nháº¥p vÃ o nÃºt <span class="font-semibold text-amber-600">"âœ¨ Luáº­n giáº£i sÃ¢u hÆ¡n"</span> Ä‘á»ƒ nháº­n phÃ¢n tÃ­ch toÃ n diá»‡n tá»« AI vá» tÃªn "Nguyá»…n Trung Kháº£i", bao gá»“m sá»± hÃ i hÃ²a vá»›i báº£n má»‡nh, ngÅ© hÃ nh vÃ  tam há»£p.</li>
                        </ul>
                    </div>

                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-3 text-amber-600">2. KhÃ¡m phÃ¡ ThÆ° viá»‡n TÃªn Gá»£i Ã</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Lá»c theo pháº©m cháº¥t:</strong> Sá»­ dá»¥ng cÃ¡c nÃºt lá»c (vÃ­ dá»¥: "ThÃ´ng Minh, TrÃ­ Tuá»‡", "Máº¡nh Máº½, KiÃªn CÆ°á»ng") Ä‘á»ƒ xem danh sÃ¡ch tÃªn gá»£i Ã½ theo tá»«ng nhÃ³m Ã½ nghÄ©a.</li>
                            <li><strong>Gá»£i Ã½ tÃªn má»›i tá»« AI:</strong> 
                                <ul class="list-circle list-inside ml-4 space-y-1">
                                    <li>Nháº­p cÃ¡c tá»« khÃ³a vá» pháº©m cháº¥t hoáº·c Ã½ nghÄ©a báº¡n mong muá»‘n cho tÃªn bÃ© vÃ o Ã´ vÄƒn báº£n (vÃ­ dá»¥: "thÃ´ng minh, tÃ i giá»i, may máº¯n").</li>
                                    <li>Nháº¥p vÃ o nÃºt <span class="font-semibold text-amber-600">"âœ¨ Gá»£i Ã½ tÃªn má»›i"</span>. AI sáº½ táº¡o ra 3 gá»£i Ã½ tÃªn má»›i kÃ¨m theo Ã½ nghÄ©a vÃ  ghi chÃº phong thá»§y phÃ¹ há»£p.</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="card p-6">
                        <h3 class="font-bold text-xl mb-3 text-amber-600">3. TÃ¬m hiá»ƒu NguyÃªn táº¯c Äáº·t TÃªn</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Má»Ÿ rá»™ng thÃ´ng tin:</strong> Nháº¥p vÃ o tiÃªu Ä‘á» cá»§a tá»«ng má»¥c (vÃ­ dá»¥: "Cáº¥u trÃºc tÃªn ngÆ°á»i Viá»‡t", "TuÃ¢n thá»§ phÃ¡p luáº­t") Ä‘á»ƒ má»Ÿ rá»™ng vÃ  Ä‘á»c chi tiáº¿t cÃ¡c nguyÃªn táº¯c vÃ  Ä‘iá»u kiÃªng ká»µ khi Ä‘áº·t tÃªn.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="bg-gray-800 text-white text-center py-6">
        <p>&copy; 2025. CÃ´ng cá»¥ Ä‘Æ°á»£c phÃ¡t triá»ƒn Ä‘á»ƒ há»— trá»£ gia Ä‘Ã¬nh Nguyá»…n Trung NghÄ©a & Nguyá»…n Thá»‹ Thu Trang.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Mobile Menu
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Name Analysis Section
            const analysisBox = document.getElementById('analysis-box');
            const deeperAnalysisContentDiv = document.getElementById('deeper-analysis-content');
            const deeperAnalysisBtn = document.getElementById('deeper-analysis-btn');
            const deeperAnalysisSpinner = document.getElementById('deeper-analysis-spinner');

            const analysisContent = {
                ho: `
                    <h4 class="font-bold text-xl mb-2">Há» Nguyá»…n</h4>
                    <p>ÄÃ¢y lÃ  há» cá»§a cha vÃ  máº¹, má»™t trong nhá»¯ng há» phá»• biáº¿n nháº¥t Viá»‡t Nam. Viá»‡c giá»¯ há» Nguyá»…n Ä‘áº£m báº£o tÃ­nh káº¿ thá»«a, truyá»n thá»‘ng vÃ  sá»± gáº¯n káº¿t gia Ä‘Ã¬nh. Vá»›i há» phá»• biáº¿n, viá»‡c chá»n tÃªn Ä‘á»‡m vÃ  tÃªn chÃ­nh Ä‘á»™c Ä‘Ã¡o, Ã½ nghÄ©a cÃ ng trá»Ÿ nÃªn quan trá»ng.</p>
                `,
                dem: `
                    <h4 class="font-bold text-xl mb-2">TÃªn Äá»‡m: Trung</h4>
                    <ul class="list-disc list-inside space-y-1 text-left">
                        <li><strong>Ã nghÄ©a:</strong> "Trung" (å¿ ) mang Ã½ nghÄ©a trung thÃ nh, trung thá»±c, chÃ­nh trá»±c, lÃ  pháº©m cháº¥t Ä‘áº¡o Ä‘á»©c cao quÃ½.</li>
                        <li><strong>Káº¿t ná»‘i gia Ä‘Ã¬nh:</strong> TÃªn Ä‘á»‡m láº¥y tá»« tÃªn cá»§a bá»‘ (Nguyá»…n Trung NghÄ©a), thá»ƒ hiá»‡n sá»± káº¿ thá»«a giÃ¡ trá»‹ tá»‘t Ä‘áº¹p vÃ  sá»± gáº¯n káº¿t cha con.</li>
                        <li><strong>Phong thá»§y:</strong> Chá»¯ "Trung" thuá»™c hÃ nh <strong>Thá»•</strong>. Theo NgÅ© hÃ nh, Há»a sinh Thá»•, ráº¥t tá»‘t cho má»‡nh Há»a cá»§a bÃ©, giÃºp táº¡o sá»± á»•n Ä‘á»‹nh, bá»n vá»¯ng.</li>
                    </ul>
                `,
                ten: `
                    <h4 class="font-bold text-xl mb-2">TÃªn ChÃ­nh: Kháº£i</h4>
                     <ul class="list-disc list-inside space-y-1 text-left">
                        <li><strong>Ã nghÄ©a:</strong> "Kháº£i" (å‡±) cÃ³ nghÄ©a lÃ  chiáº¿n tháº¯ng, kháº£i hoÃ n, má»Ÿ ra má»™t tÆ°Æ¡ng lai ráº¡ng rá»¡, thÃ nh cÃ´ng.</li>
                        <li><strong>Phong thá»§y:</strong> Chá»¯ "Kháº£i" cÃ³ Ã¢m Ä‘áº§u "K" thuá»™c hÃ nh <strong>Má»™c</strong>. Theo NgÅ© hÃ nh, Má»™c sinh Há»a, vÃ´ cÃ¹ng tá»‘t cho báº£n má»‡nh, giÃºp nuÃ´i dÆ°á»¡ng vÃ  phÃ¡t triá»ƒn nÄƒng lÆ°á»£ng.</li>
                        <li><strong>Tuá»•i Tá»µ:</strong> TÃªn "Kháº£i" khÃ´ng pháº¡m cÃ¡c bá»™ thá»§ kiÃªng ká»µ, láº¡i mang Ã½ nghÄ©a chiáº¿n tháº¯ng, ráº¥t há»£p vá»›i tÃ­nh cÃ¡ch máº¡nh máº½, quyáº¿t Ä‘oÃ¡n cá»§a ngÆ°á»i tuá»•i Tá»µ.</li>
                    </ul>
                `
            };

            document.getElementById('card-ho').addEventListener('click', () => updateAnalysis('ho'));
            document.getElementById('card-dem').addEventListener('click', () => updateAnalysis('dem'));
            document.getElementById('card-ten').addEventListener('click', () => updateAnalysis('ten'));

            function updateAnalysis(part) {
                deeperAnalysisContentDiv.innerHTML = ''; // Clear deeper analysis when clicking static cards
                analysisBox.querySelector('p.italic').style.display = 'block'; // Show "Nháº¥n vÃ o tá»«ng pháº§n..."
                analysisBox.innerHTML = analysisContent[part] + '<div id="deeper-analysis-content"></div>'; // Re-add deeper analysis div
                document.querySelectorAll('#recommendation [id^="card-"]').forEach(c => c.classList.remove('bg-amber-100', 'ring-2', 'ring-amber-500'));
                document.getElementById(`card-${part}`).classList.add('bg-amber-100', 'ring-2', 'ring-amber-500');
            }

            // Gemini API Integration - Deeper Name Analysis
            deeperAnalysisBtn.addEventListener('click', async () => {
                deeperAnalysisSpinner.classList.remove('hidden');
                deeperAnalysisBtn.disabled = true;
                analysisBox.querySelector('p.italic').style.display = 'none'; // Hide "Nháº¥n vÃ o tá»«ng pháº§n..."
                deeperAnalysisContentDiv.innerHTML = ''; // Clear previous content

                const prompt = `Báº¡n lÃ  chuyÃªn gia phong thá»§y vÃ  Ä‘áº·t tÃªn. Luáº­n giáº£i sÃ¢u hÆ¡n vá» Ã½ nghÄ©a cá»§a tÃªn 'Nguyá»…n Trung Kháº£i' cho bÃ© trai dá»± sinh 11/01/2026 (áº¤t Tá»µ, má»‡nh Há»a - PhÃº ÄÄƒng Há»a), cha Nguyá»…n Trung NghÄ©a, máº¹ Nguyá»…n Thá»‹ Thu Trang. PhÃ¢n tÃ­ch sá»± hÃ i hÃ²a cá»§a tÃªn vá»›i báº£n má»‡nh Há»a, NgÅ© hÃ nh tÆ°Æ¡ng sinh (Má»™c, Thá»•), vÃ  má»‘i quan há»‡ Tam há»£p (Tá»µ, Dáº­u, Sá»­u). Äá»“ng thá»i, giáº£i thÃ­ch Ã½ nghÄ©a tá»«ng chá»¯ trong tÃªn vÃ  tá»•ng hÃ²a Ã½ nghÄ©a cá»§a cáº£ cÃ¡i tÃªn. Vui lÃ²ng Ä‘á»‹nh dáº¡ng cÃ¢u tráº£ lá»i báº±ng HTML, sá»­ dá»¥ng cÃ¡c tháº» nhÆ° <p>, <strong>, <em>, <ul>, <li> Ä‘á»ƒ trÃ¬nh bÃ y rÃµ rÃ ng.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "AIzaSyBaLi7TzZJ9SwmHilU24SRcV2i7lU6gqdQ"; // Leave this as-is. Canvas will provide the API key.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        deeperAnalysisContentDiv.innerHTML = `<div class="mt-4 p-4 bg-amber-100 rounded-lg border border-amber-200">${text}</div>`;
                    } else {
                        deeperAnalysisContentDiv.innerHTML = `<p class="text-red-500 mt-4">KhÃ´ng thá»ƒ táº¡o luáº­n giáº£i sÃ¢u hÆ¡n. Vui lÃ²ng thá»­ láº¡i.</p>`;
                    }
                } catch (error) {
                    console.error('Error calling Gemini API for deeper analysis:', error);
                    deeperAnalysisContentDiv.innerHTML = `<p class="text-red-500 mt-4">ÄÃ£ xáº£y ra lá»—i khi káº¿t ná»‘i AI. Vui lÃ²ng thá»­ láº¡i.</p>`;
                } finally {
                    deeperAnalysisSpinner.classList.add('hidden');
                    deeperAnalysisBtn.disabled = false;
                }
            });


            // Feng Shui Chart
            const ctx = document.getElementById('fengShuiChart').getContext('2d');
            new Chart(ctx, {
                type: 'polarArea',
                data: {
                    labels: ['Má»™c (TÆ°Æ¡ng Sinh)', 'Thá»• (TÆ°Æ¡ng Sinh)', 'Há»a (Báº£n Má»‡nh)', 'Kim (Kháº¯c)', 'Thá»§y (Kháº¯c)'],
                    datasets: [{
                        label: 'Má»©c Ä‘á»™ tÆ°Æ¡ng há»£p',
                        data: [5, 4, 3, 2, 1],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.6)', // green-500
                            'rgba(202, 138, 4, 0.6)',  // yellow-600
                            'rgba(220, 38, 38, 0.6)',  // red-600
                            'rgba(107, 114, 128, 0.6)',// gray-500
                            'rgba(37, 99, 235, 0.6)'  // blue-600
                        ],
                        borderColor: [
                            'rgba(5, 150, 105, 1)',
                            'rgba(161, 98, 7, 1)',
                            'rgba(185, 28, 28, 1)',
                            'rgba(75, 85, 99, 1)',
                            'rgba(29, 78, 216, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            pointLabels: {
                                display: true,
                                centerPointLabels: true,
                                font: {
                                    size: 13,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += ['Ráº¥t Tá»‘t', 'Tá»‘t', 'HÃ²a Há»£p', 'NÃªn CÃ¢n Nháº¯c', 'NÃªn TrÃ¡nh'][context.dataIndex];
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            // Name Library - Static Names
            const namesData = [
                { name: 'Minh Triáº¿t', category: 'tritue' }, { name: 'ÄÄƒng Khoa', category: 'tritue' }, { name: 'Anh Minh', category: 'tritue' }, { name: 'Minh TrÃ­', category: 'tritue' },
                { name: 'Viá»‡t DÅ©ng', category: 'manhme' }, { name: 'ChÃ­ KiÃªn', category: 'manhme' }, { name: 'Äá»©c Máº¡nh', category: 'manhme' }, { name: 'HÃ¹ng DÅ©ng', category: 'manhme' },
                { name: 'An Khang', category: 'mayman' }, { name: 'ThiÃªn PhÃºc', category: 'mayman' }, { name: 'Há»¯u PhÆ°á»›c', category: 'mayman' }, { name: 'Báº£o An', category: 'mayman' },
                { name: 'ThÃ nh Äáº¡t', category: 'thanhcong' }, { name: 'Quang Vinh', category: 'thanhcong' }, { name: 'Tiáº¿n ThÃ nh', category: 'thanhcong' }, { name: 'PhÃº Äáº¡t', category: 'thanhcong' },
                { name: 'Minh Äá»©c', category: 'daoduc' }, { name: 'Trung NghÄ©a', category: 'daoduc' }, { name: 'Äá»©c Viá»‡t', category: 'daoduc' }, { name: 'Trá»ng NghÄ©a', category: 'daoduc' }
            ];

            const nameGrid = document.getElementById('name-grid');
            const filterButtons = document.querySelectorAll('#library .filter-btn');
            const aiNameInput = document.getElementById('ai-name-input');
            const generateAiNamesBtn = document.getElementById('generate-ai-names-btn');
            const aiNamesSpinner = document.getElementById('ai-names-spinner');
            const aiGeneratedNamesDiv = document.getElementById('ai-generated-names');

            function displayNames(filter) {
                nameGrid.innerHTML = '';
                const filteredNames = (filter === 'all') ? namesData : namesData.filter(n => n.category === filter);
                filteredNames.forEach(item => {
                    const nameDiv = document.createElement('div');
                    nameDiv.className = 'name-item p-4 bg-white rounded-lg shadow-sm text-center font-semibold text-gray-700 border border-gray-200';
                    nameDiv.textContent = item.name;
                    nameGrid.appendChild(nameDiv);
                });
            }

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    displayNames(button.dataset.filter);
                });
            });

            displayNames('all');
            
            // Gemini API Integration - Generate New Names
            generateAiNamesBtn.addEventListener('click', async () => {
                const traits = aiNameInput.value.trim();
                if (!traits) {
                    aiGeneratedNamesDiv.innerHTML = `<p class="text-red-500">Vui lÃ²ng nháº­p cÃ¡c pháº©m cháº¥t mong muá»‘n.</p>`;
                    return;
                }

                aiNamesSpinner.classList.remove('hidden');
                generateAiNamesBtn.disabled = true;
                aiGeneratedNamesDiv.innerHTML = '';

                const prompt = `Báº¡n lÃ  chuyÃªn gia Ä‘áº·t tÃªn tiáº¿ng Viá»‡t. HÃ£y gá»£i Ã½ 3 tÃªn bÃ© trai há» Nguyá»…n, dá»± sinh 11/01/2026 (áº¤t Tá»µ, má»‡nh Há»a - PhÃº ÄÄƒng Há»a), cÃ³ tÃªn Ä‘á»‡m lÃ  'Trung' hoáº·c 'Kháº£i', vÃ  mang Ã½ nghÄ©a vá» ${traits}. Äáº£m báº£o tÃªn há»£p phong thá»§y NgÅ© hÃ nh (Má»™c sinh Há»a, Há»a sinh Thá»•), trÃ¡nh tá»© hÃ nh xung (Dáº§n, ThÃ¢n, Há»£i) vÃ  cÃ¡c bá»™ thá»§ kiÃªng ká»µ (Má»…, Äáº­u, HÃ²a).
Tráº£ lá»i dÆ°á»›i dáº¡ng JSON ARRAY, má»—i pháº§n tá»­ lÃ  má»™t OBJECT cÃ³ cÃ¡c thuá»™c tÃ­nh:
- \`name\`: TÃªn Ä‘áº§y Ä‘á»§ (vÃ­ dá»¥: Nguyá»…n Trung An)
- \`meaning\`: Ã nghÄ©a ngáº¯n gá»n cá»§a tÃªn
- \`fengshui_notes\`: Ghi chÃº vá» sá»± hÃ i hÃ²a phong thá»§y (vÃ­ dá»¥: Há»£p má»‡nh Há»a, Má»™c sinh Há»a)
`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: {
                                type: "OBJECT",
                                properties: {
                                    "name": { "type": "STRING" },
                                    "meaning": { "type": "STRING" },
                                    "fengshui_notes": { "type": "STRING" }
                                },
                                "propertyOrdering": ["name", "meaning", "fengshui_notes"]
                            }
                        }
                    }
                };
                const apiKey = "AIzaSyBaLi7TzZJ9SwmHilU24SRcV2i7lU6gqdQ"; // Leave this as-is. Canvas will provide the API key.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const json = result.candidates[0].content.parts[0].text;
                        const parsedJson = JSON.parse(json);
                        
                        if (parsedJson.length > 0) {
                            parsedJson.forEach(item => {
                                const nameCard = document.createElement('div');
                                nameCard.className = 'card p-4 border border-amber-200 bg-amber-50';
                                nameCard.innerHTML = `
                                    <p class="text-lg font-bold text-amber-700">${item.name}</p>
                                    <p class="text-sm text-gray-600 mt-1">Ã nghÄ©a: ${item.meaning}</p>
                                    <p class="text-xs text-gray-500 mt-1">Phong thá»§y: ${item.fengshui_notes}</p>
                                `;
                                aiGeneratedNamesDiv.appendChild(nameCard);
                            });
                        } else {
                            aiGeneratedNamesDiv.innerHTML = `<p class="text-gray-600">KhÃ´ng tÃ¬m tháº¥y gá»£i Ã½ tÃªn nÃ o phÃ¹ há»£p.</p>`;
                        }

                    } else {
                        aiGeneratedNamesDiv.innerHTML = `<p class="text-red-500">KhÃ´ng thá»ƒ táº¡o gá»£i Ã½ tÃªn. Vui lÃ²ng thá»­ láº¡i.</p>`;
                    }
                } catch (error) {
                    console.error('Error calling Gemini API for new names:', error);
                    aiGeneratedNamesDiv.innerHTML = `<p class="text-red-500">ÄÃ£ xáº£y ra lá»—i khi káº¿t ná»‘i AI. Vui lÃ²ng thá»­ láº¡i.</p>`;
                } finally {
                    aiNamesSpinner.classList.add('hidden');
                    generateAiNamesBtn.disabled = false;
                }
            });


            // Accordion
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('.accordion-icon');
                    
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        icon.textContent = '+';
                    } else {
                        // Close other accordions
                        document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                        document.querySelectorAll('.accordion-icon').forEach(i => i.textContent = '+');
                        
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.textContent = '-';
                    }
                });
            });

            // Active nav link on scroll
            const sections = document.querySelectorAll('main section');
            const navLinks = document.querySelectorAll('nav a.nav-link');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active-nav');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active-nav');
                    }
                });
            });

        });
    </script>
</body>
</html>
